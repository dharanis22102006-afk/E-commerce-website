<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vintage Store</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<style>
body { font-family: Arial,sans-serif; margin:0; background:#fdf6f0; color:#333; }
header { background: linear-gradient(45deg, teal, darkcyan); color:white; padding:15px; position:fixed; top:0; left:0; right:0; display:flex; justify-content:space-between; align-items:center; z-index:1000; }
nav a, .logout-btn { margin:0 10px; color:white; text-decoration:none; font-weight:bold; cursor:pointer; }
nav a:hover, .logout-btn:hover { text-decoration:underline; }
main { padding:120px 20px 40px; }
section { display:none; }
section.active { display:block; }

/* Login/Register Forms */
#login-container, #register-container {
  max-width:400px; margin:120px auto; padding:30px; background:white; border-radius:15px; box-shadow:0 6px 18px rgba(0,0,0,0.15);
}
#login-container h2, #register-container h2 { text-align:center; margin-bottom:20px; }
#login-container input, #register-container input { width:100%; padding:10px; margin-bottom:15px; border-radius:5px; border:1px solid #ccc; }
#login-container button, #register-container button { width:100%; padding:10px; border:none; border-radius:5px; background:teal; color:white; cursor:pointer; }
#login-container button:hover, #register-container button:hover { background:darkcyan; }
#login-container p, #register-container p { text-align:center; margin-top:10px; }

/* Home Page */
#home.active { 
  min-height:100vh; 
  background:linear-gradient(135deg, #f7e9d7, #f4d9e0, #d7e8f7); 
  padding:50px 20px; 
  text-align:center; 
  animation:fadeIn 1s ease-in-out; 
  display:flex; 
  flex-direction:column; 
  align-items:center;
  justify-content:center;
}
#home h2 { font-size:2.5rem; margin-bottom:15px; }
#home p { font-size:1.2rem; margin-bottom:30px; }

.category-options { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:20px; width:100%; max-width:1200px; margin:0 auto; }
.category-card { background:white; border-radius:15px; padding:20px; text-align:center; cursor:pointer; transition: transform 0.2s, box-shadow 0.3s; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
.category-card:hover { transform:translateY(-5px); box-shadow:0 6px 15px rgba(0,0,0,0.2); }
.category-card img { width:120px; height:120px; object-fit:cover; border-radius:50%; margin-bottom:15px; border:3px solid teal; background:linear-gradient(135deg,#f3e5d0,#e7d9c8); padding:8px; }

/* Products Grid */
.products-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:30px; padding:20px; }
.card { background:#fffaf5; border:none; border-radius:15px; padding:20px; text-align:center; box-shadow:0 6px 18px rgba(0,0,0,0.15); transition: transform 0.2s ease, box-shadow 0.2s ease; }
.card:hover { transform:translateY(-8px); box-shadow:0 12px 28px rgba(0,0,0,0.25); }
.card img { width:100%; height:220px; object-fit:cover; border-radius:12px; margin-bottom:15px; background:linear-gradient(135deg,#f3e5d0,#e7d9c8); padding:8px; box-shadow: inset 0 2px 6px rgba(0,0,0,0.15); }
.card button { margin-top:5px; padding:8px 12px; border:none; border-radius:5px; cursor:pointer; }
.card button:first-of-type { background:teal; color:white; }
.card button:first-of-type:hover { background:darkcyan; }
.card button:last-of-type { background:orange; color:white; margin-left:5px; }
.card button:last-of-type:hover { background:darkorange; }

/* Cart */
#cart-items, #buy-items { display:flex; flex-direction:column; gap:15px; }
.cart-item { background:white; border:1px solid #ddd; border-radius:10px; padding:15px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.cart-item button { background:crimson;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer; }
.cart-item button:hover { background:darkred; }
#cart-total, #buy-total { margin-top:20px; font-size:1.2rem; font-weight:bold; }

/* Contact Page */
#contact { 
  padding:60px 20px; 
  max-width:800px; 
  margin:0 auto; 
  background:#fef8f0; 
  border-radius:15px; 
  box-shadow:0 6px 15px rgba(0,0,0,0.1); 
}
#contact h2 { font-size:2rem; margin-bottom:30px; text-align:center; }
#contact form { display:flex; flex-direction:column; gap:20px; }
#contact input, #contact textarea { padding:15px; border-radius:8px; border:1px solid #ccc; font-size:1rem; width:100%; }
#contact textarea { min-height:150px; }
#contact button { padding:12px; border:none; border-radius:8px; background:teal; color:white; font-size:1rem; cursor:pointer; }
#contact button:hover { background:darkcyan; }
#contact p { margin-top:15px; font-size:1rem; text-align:center; }

@keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
</style>
</head>
<body>

<!-- Login/Register Forms -->
<section id="login-container">
  <h2>Login</h2>
  <form id="loginForm">
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
  <p>Don't have an account? <a href="#" onclick="showRegister()">Register</a></p>
</section>

<section id="register-container" style="display:none;">
  <h2>Register</h2>
  <form id="registerForm">
    <input type="email" id="regEmail" placeholder="Email" required>
    <input type="password" id="regPassword" placeholder="Password" required>
    <button type="submit">Register</button>
  </form>
  <p>Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
</section>

<!-- Store Content -->
<div id="store-content" style="display:none;">
<header>
  <h2>üï∞Ô∏è Vintage Store</h2>
  <nav>
    <a href="#" onclick="showPage('home'); return false;">Home</a>
    <a href="#" onclick="showPage('products'); return false;">Products</a>
    <a href="#" onclick="showPage('cart'); return false;">Cart üõí</a>
    <a href="#" onclick="showPage('about'); return false;">About</a>
    <a href="#" onclick="showPage('contact'); return false;">Contact</a>
    <span class="logout-btn" onclick="logout()">Logout</span>
  </nav>
</header>

<main>
  <section id="home" class="active">
    <h2>Welcome to Vintage Store</h2>
    <p>Choose your favorite category and explore timeless classics ‚ú®</p>
    <div class="category-options">
      <div class="category-card" onclick="filterCategory('watches')">
        <img src="https://www.shutterstock.com/image-photo/vintage-old-pocket-watch-600nw-552011227.jpg" alt="Watches">
        <h3>Watches</h3>
      </div>
      <div class="category-card" onclick="filterCategory('clocks')">
        <img src="https://m.media-amazon.com/images/I/81Npl-U3l5L._UF894,1000_QL80_.jpg" alt="Clocks">
        <h3>Clocks</h3>
      </div>
      <div class="category-card" onclick="filterCategory('lights')">
        <img src="https://content.jdmagicbox.com/v2/comp/firozabad/w2/9999p5612.5612.241230123800.v4w2/catalogue/glass-metal-craft-jagdamba-nagar-firozabad-chandelier-light-dealers-61jz9fdkil.jpg" alt="Lights">
        <h3>Lights</h3>
      </div>
    </div>
  </section>

  <section id="products">
    <h2>Our Products</h2>
    <div id="productsGrid" class="products-grid">
      <div class="card" data-name="Handmade Watch" data-price="1200" data-category="watches">
        <img src="https://img0.etsystatic.com/027/0/7172877/il_fullxfull.613412924_rr1t.jpg" alt="Watch">
        <h3>Handmade Watch</h3>
        <p>Price: ‚Çπ1200</p>
        <label>Quantity: <input type="number" value="1" min="1"></label>
        <button onclick="addToCart(this)">Add to Cart</button>
        <button onclick="buyProduct(this)">Buy Now</button>
      </div>
      <div class="card" data-name="Wooden Clock" data-price="2200" data-category="clocks">
        <img src="https://arttales.in/cdn/shop/files/Bonded_Tops_Wall_Clock__1.jpg?v=1736769787&width=1946" alt="Clock">
        <h3>Wooden Clock</h3>
        <p>Price: ‚Çπ2200</p>
        <label>Quantity: <input type="number" value="1" min="1"></label>
        <button onclick="addToCart(this)">Add to Cart</button>
        <button onclick="buyProduct(this)">Buy Now</button>
      </div>
      <div class="card" data-name="Vintage Light" data-price="1800" data-category="lights">
        <img src="https://images-cdn.ubuy.co.in/64ef835472399f1a867b7a66-wonder-garden-outdoor-string-lights-with.jpg" alt="Light">
        <h3>Vintage Light</h3>
        <p>Price: ‚Çπ1800</p>
        <label>Quantity: <input type="number" value="1" min="1"></label>
        <button onclick="addToCart(this)">Add to Cart</button>
        <button onclick="buyProduct(this)">Buy Now</button>
      </div>
    </div>
  </section>

  <section id="cart">
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
    <p id="cart-total">Total: ‚Çπ0</p>
  </section>

  <section id="about">
    <h2>About Vintage Store</h2>
    <p>We bring you handpicked timeless collections from vintage watches, clocks, and lighting.</p>
  </section>

  <!-- Contact Page with Feedback -->
  <section id="contact">
    <h2>Contact Us</h2>
    <form id="contactForm">
      <input type="text" id="contactName" placeholder="Your Name" required>
      <input type="email" id="contactEmail" placeholder="Your Email" required>
      <textarea id="contactMessage" placeholder="Message" required></textarea>
      <button type="submit">Send</button>
      <p>If any issues, email us at <strong>support@vintagestore.com</strong></p>
      <p id="contactFeedback" style="color:green; font-weight:bold; display:none;"></p>
    </form>
  </section>
</main>
</div>

<script>
// Firebase Configuration
const firebaseConfig = {
  apiKey: "AIzaSyA8xmP1860A5XtWzlFcIWqY1jSl3dN2cME",
  authDomain: "vintage-products-ce5dc.firebaseapp.com",
  projectId: "vintage-products-ce5dc",
  storageBucket: "vintage-products-ce5dc.appspot.com",
  messagingSenderId: "20067314983",
  appId: "1:20067314983:web:5d209cf0775937b532cd02",
  measurementId: "G-L8P96QDLC0"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Show Login/Register
function showRegister(){ document.getElementById('login-container').style.display='none'; document.getElementById('register-container').style.display='block'; }
function showLogin(){ document.getElementById('login-container').style.display='block'; document.getElementById('register-container').style.display='none'; }

// Firebase Auth
document.getElementById('loginForm').addEventListener('submit', e=>{
  e.preventDefault();
  const email=document.getElementById('email').value;
  const password=document.getElementById('password').value;
  auth.signInWithEmailAndPassword(email,password)
      .then(()=> { document.getElementById('login-container').style.display='none'; document.getElementById('store-content').style.display='block'; })
      .catch(err=>alert(err.message));
});
document.getElementById('registerForm').addEventListener('submit', e=>{
  e.preventDefault();
  const email=document.getElementById('regEmail').value;
  const password=document.getElementById('regPassword').value;
  auth.createUserWithEmailAndPassword(email,password)
      .then(()=>{ alert("Account created! Please login."); showLogin(); })
      .catch(err=>alert(err.message));
});

// Logout
function logout(){ auth.signOut().then(()=>{ alert("Logged out"); location.reload(); }); }

// Store Functions
let cart=[];
let buyList=[];
function showPage(pageId){
  document.querySelectorAll("#store-content main section").forEach(sec=>sec.classList.remove("active"));
  document.getElementById(pageId).classList.add("active");
  if(pageId==="cart") renderCart();
}

// Add to Cart
function addToCart(button){
  const card=button.closest(".card");
  const name=card.dataset.name;
  const price=parseInt(card.dataset.price);
  const qty=parseInt(card.querySelector("input").value);
  const existing=cart.find(item=>item.name===name);
  if(existing) existing.qty+=qty; else cart.push({name,price,qty});
  alert(name+" added to cart!");
}

// Render Cart
function renderCart(){
  const cartDiv=document.getElementById("cart-items");
  cartDiv.innerHTML="";
  let total=0;
  if(cart.length===0) cartDiv.innerHTML="<p>Your cart is empty.</p>";
  else cart.forEach((item,index)=>{
    total+=item.price*item.qty;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`<span>${item.name} (x${item.qty}) - ‚Çπ${item.price*item.qty}</span>
                   <button onclick="removeFromCart(${index})">Remove</button>`;
    cartDiv.appendChild(div);
  });
  document.getElementById("cart-total").innerText="Total: ‚Çπ"+total;
}
function removeFromCart(index){ cart.splice(index,1); renderCart(); }
function filterCategory(category){ 
  showPage('products'); 
  document.querySelectorAll("#productsGrid .card").forEach(card=>{
    card.style.display=(card.dataset.category===category)?"block":"none"; 
  }); 
}

// Buy Now Functions
function buyProduct(button){
  const card = button.closest(".card");
  const name = card.dataset.name;
  const price = parseInt(card.dataset.price);
  const qty = parseInt(card.querySelector("input").value);

  const existing = buyList.find(item => item.name === name);
  if(existing) existing.qty += qty; 
  else buyList.push({name, price, qty});

  showBuySummary();
}
function showBuySummary(){
  document.querySelectorAll("#store-content main section").forEach(sec => sec.classList.remove("active"));
  let summarySection = document.getElementById("buy-summary");
  if(!summarySection){
    summarySection = document.createElement("section");
    summarySection.id = "buy-summary";
    summarySection.innerHTML = `
      <h2>Buy Summary</h2>
      <div id="buy-items"></div>
      <p id="buy-total"></p>
      <h3>Payment Options</h3>
      <button onclick="pay('Online')">Online Payment</button>
      <button onclick="pay('Offline')">Offline Payment</button>`;
    document.querySelector("main").appendChild(summarySection);
  }
  summarySection.classList.add("active");

  const buyDiv = document.getElementById("buy-items");
  buyDiv.innerHTML = "";
  let total = 0;
  buyList.forEach(item => {
      total += item.price * item.qty;
      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = `${item.name} (x${item.qty}) - ‚Çπ${item.price * item.qty}`;
      buyDiv.appendChild(div);
  });
  document.getElementById("buy-total").innerText = `Total: ‚Çπ${total}`;
}
function pay(method){
  if(method === 'Online'){
    let onlineOption = prompt("Choose payment app: GPay, Razorpay, Paytm");
    if(onlineOption) alert(`Payment successful via ${onlineOption}! Thanks for buying!`);
  } else {
    alert("You chose offline payment. Your order is placed! Thanks for buying!");
  }
  buyList = [];
  showPage('home');
}

// Auto check auth state
auth.onAuthStateChanged(user=>{
  if(user){ document.getElementById('login-container').style.display='none'; document.getElementById('store-content').style.display='block'; }
  else { document.getElementById('login-container').style.display='block'; document.getElementById('store-content').style.display='none'; }
});

// Contact Form Submission with success message
document.getElementById("contactForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const name = document.getElementById("contactName").value;
  const email = document.getElementById("contactEmail").value;
  const message = document.getElementById("contactMessage").value;
  const feedback = document.getElementById("contactFeedback");

  db.collection("queries").add({
    name: name,
    email: email,
    message: message,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  })
  .then(() => {
    feedback.innerText = "‚úÖ Your query has been submitted successfully!";
    feedback.style.display = "block";
    document.getElementById("contactForm").reset();
    setTimeout(() => { feedback.style.display = "none"; }, 5000);
  })
  .catch(error => {
    feedback.innerText = "‚ùå Error submitting query: " + error.message;
    feedback.style.color = "red";
    feedback.style.display = "block";
    setTimeout(() => { feedback.style.display = "none"; feedback.style.color = "green"; }, 5000);
  });
});
</script>
</body>
</html>
